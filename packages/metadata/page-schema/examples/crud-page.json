{
  "version": "1.0.0",
  "page": {
    "id": "user-management",
    "name": "用户管理",
    "description": "用户 CRUD 管理页面",
    "route": "/admin/users"
  },
  "dataSources": {
    "userList": {
      "api": "GET /api/users",
      "params": { "page": 1, "pageSize": 20 },
      "transform": "data.items",
      "autoFetch": true
    },
    "createUser": {
      "api": "POST /api/users",
      "method": "POST"
    },
    "updateUser": {
      "api": "PUT /api/users/:id",
      "method": "PUT"
    },
    "deleteUser": {
      "api": "DELETE /api/users/:id",
      "method": "DELETE"
    }
  },
  "tree": [
    {
      "id": "root",
      "component": "NResizable",
      "props": { "direction": "vertical" },
      "children": [
        {
          "id": "breadcrumb",
          "component": "NBreadcrumb",
          "props": {
            "items": [
              { "label": "首页", "href": "/" },
              { "label": "管理后台", "href": "/admin" },
              { "label": "用户管理" }
            ]
          }
        },
        {
          "id": "toolbar",
          "component": "NCard",
          "props": { "variant": "default" },
          "children": [
            {
              "id": "search",
              "component": "NInputGroup",
              "props": { "icon": "search" },
              "children": [
                {
                  "id": "search-input",
                  "component": "NInput",
                  "props": { "placeholder": "搜索用户名、邮箱...", "size": "md" },
                  "binding": { "dataSource": "userList", "onChange": "userList" }
                }
              ]
            },
            {
              "id": "create-btn",
              "component": "NButton",
              "props": { "label": "新建用户", "variant": "default", "icon": "plus" },
              "binding": { "onClick": "createUser" }
            }
          ]
        },
        {
          "id": "user-table",
          "component": "NDataTable",
          "props": {
            "columns": [
              { "key": "name", "label": "姓名", "sortable": true },
              { "key": "email", "label": "邮箱", "sortable": true },
              { "key": "role", "label": "角色" },
              { "key": "status", "label": "状态" },
              { "key": "createdAt", "label": "创建时间", "sortable": true }
            ]
          },
          "binding": { "dataSource": "userList", "field": "data" }
        },
        {
          "id": "pagination",
          "component": "NPagination",
          "props": { "currentPage": 1, "totalPages": 10 },
          "binding": { "dataSource": "userList" }
        },
        {
          "id": "empty-state",
          "component": "NEmpty",
          "props": { "title": "暂无用户", "description": "点击上方按钮创建第一个用户", "actionLabel": "新建用户" }
        },
        {
          "id": "create-dialog",
          "component": "NDialog",
          "props": { "title": "新建用户" },
          "children": [
            {
              "id": "create-name",
              "component": "NField",
              "props": { "label": "姓名", "required": true },
              "children": [
                {
                  "id": "create-name-input",
                  "component": "NInput",
                  "props": { "placeholder": "请输入姓名" },
                  "binding": { "field": "name" }
                }
              ]
            },
            {
              "id": "create-email",
              "component": "NField",
              "props": { "label": "邮箱", "required": true },
              "children": [
                {
                  "id": "create-email-input",
                  "component": "NInput",
                  "props": { "placeholder": "请输入邮箱", "type": "email" },
                  "binding": { "field": "email" }
                }
              ]
            },
            {
              "id": "create-role",
              "component": "NField",
              "props": { "label": "角色", "required": true },
              "children": [
                {
                  "id": "create-role-select",
                  "component": "NSelect",
                  "props": {
                    "placeholder": "选择角色",
                    "options": [
                      { "value": "admin", "label": "管理员" },
                      { "value": "editor", "label": "编辑者" },
                      { "value": "viewer", "label": "查看者" }
                    ]
                  },
                  "binding": { "field": "role" }
                }
              ]
            },
            {
              "id": "create-submit",
              "component": "NButton",
              "props": { "label": "创建", "variant": "default" },
              "binding": { "onSubmit": "createUser" }
            }
          ]
        },
        {
          "id": "edit-sheet",
          "component": "NSheet",
          "props": { "title": "编辑用户", "side": "right" },
          "children": [
            {
              "id": "edit-name",
              "component": "NField",
              "props": { "label": "姓名", "required": true },
              "children": [
                {
                  "id": "edit-name-input",
                  "component": "NInput",
                  "props": { "placeholder": "请输入姓名" },
                  "binding": { "field": "name", "prefill": { "dataSource": "userList", "fieldMap": { "name": "name" } } }
                }
              ]
            },
            {
              "id": "edit-save",
              "component": "NButton",
              "props": { "label": "保存", "variant": "default" },
              "binding": { "onSubmit": "updateUser" }
            }
          ]
        },
        {
          "id": "delete-confirm",
          "component": "NAlertDialog",
          "props": {
            "title": "确认删除",
            "description": "删除后无法恢复，确定要删除该用户吗？",
            "confirmLabel": "删除",
            "cancelLabel": "取消",
            "destructive": true
          },
          "binding": { "onConfirm": "deleteUser" }
        }
      ]
    }
  ]
}
