# neuron-ui 项目总体规划 (v2)

> 修订说明：本文档替代 v1 版本。项目目标从"AI 阅读组件库"调整为"API + TaskCase 驱动自动生成页面"。

---

## 四大目标及其关系

```
目标 1                    目标 2                     目标 3                    目标 4
shadcn 二次开发    ──►    组件-接口类型映射    ──►    API+TaskCase           ──►  拖拉拽细节调整
(地基)                    (桥梁)                    自动生成页面                  (最后一公里)
                                                    (核心引擎)
```

### 目标定义

| # | 目标 | 核心产出 | 说明 |
|---|------|---------|------|
| 1 | **shadcn 二次开发** | 53 个组件库 | 按设计规范对 shadcn 进行二次开发，形成 neuron-ui 组件库 |
| 2 | **组件-接口类型映射** | 映射规则 (AI 参考) | 定义每个组件适用于哪种接口类型（GET/POST/PUT/DELETE），作为 AI 生成时的参考指南 |
| 3 | **AI 驱动页面自动生成** | AI 生成引擎 | 用户提供任意格式的 API 列表和 TaskCase，AI 理解内容后自动生成页面 |
| 4 | **拖拉拽细节调整** | 可视化编辑器 | 在 AI 生成的页面基础上，进行人工微调和细节优化 |

### 依赖关系

```
目标 1 (组件库)           无依赖 — 地基
   │
   ▼
目标 2 (组件-接口映射)    依赖目标 1 — 需要知道有哪些组件
   │
   ▼
目标 3 (自动生成引擎)     依赖目标 1 + 目标 2 — 需要组件 + 映射规则
   │
   ▼
目标 4 (拖拉拽调整)       依赖目标 1 + 目标 3 — 需要组件渲染 + 生成的页面
```

### 核心流程

```
┌──────────────┐     ┌──────────────┐     ┌───────────────────┐     ┌──────────────┐     ┌──────────┐
│  后端          │     │  产品          │     │                   │     │  拖拉拽编辑器  │     │  最终页面  │
│  API 列表      │────►│  TaskCase     │────►│       AI          │────►│  人工微调     │────►│  发布上线  │
│  (任意格式)    │     │  (任意格式)    │     │  理解内容 → 选组件 │     │  属性/布局    │     │          │
└──────────────┘     └──────────────┘     │  → 生成 Page      │     └──────────────┘     └──────────┘
                                           └─────────┬─────────┘
                                                     │ 参考
                                              ┌──────▼───────┐
                                              │ 组件-接口映射  │
                                              │ (AI 参考指南)  │
                                              │ GET → 展示组件 │
                                              │ POST→ 表单组件 │
                                              │ PUT → 编辑组件 │
                                              │ DELETE→确认组件│
                                              └──────────────┘
```

### 执行阶段

```
阶段 1 — 基建 (目标 1)
├── Design Token 包 (暖灰色系 + Tailwind v4)
├── shadcn 二次开发 25+ 组件
├── Storybook 组件文档
└── 组件 TypeScript 类型定义

阶段 2 — 映射规则 (目标 2)
├── 组件-接口类型分类体系 (53 组件全标注)
├── 字段类型 → 组件映射规则 (AI 参考指南)
├── API 模式 → 页面模板 (CRUD / Dashboard / Detail-with-tabs)
└── component-api-mapping.json (AI 参考文件)

阶段 3 — AI 驱动生成 (目标 3)
├── AI System Prompt 设计 (注入映射规则 + 组件清单 + 格式要求)
├── Few-shot 示例 (帮助 AI 理解输出格式)
├── generatePage() 核心 API (调用 AI → 生成 Page Schema)
├── Page Schema 校验器 (格式 + 嵌套 + 绑定 + Token)
└── 自动修复 + 重试机制

阶段 4 — 可视化调整 (目标 4)
├── Page Schema 渲染器
├── 拖拉拽画布
├── 属性编辑面板
├── 预览与发布
└── 模板保存与复用
```

### 四个目标的共享产出

| 产出物 | 目标 1 | 目标 2 | 目标 3 | 目标 4 |
|--------|--------|--------|--------|--------|
| Design Tokens | ✅ 开发依据 | — | — | ✅ 编辑器面板 |
| 组件 TypeScript 类型 | ✅ 开发规范 | ✅ 提取 Props 元数据 | ✅ 数据绑定类型 | ✅ 属性面板生成 |
| 组件-接口映射规则 | — | ✅ 定义 | ✅ AI 参考指南 | ✅ 约束拖拽行为 |
| Page Schema | — | — | ✅ 生成输出 | ✅ 编辑器读写 |
| 组件渲染引擎 | ✅ 组件实现 | — | ✅ 生成预览 | ✅ 画布渲染 |

---

详细规划文档：

- [目标 1: shadcn 二次开发](./01-goal-shadcn-design-system.md)
- [目标 2: 组件-接口类型映射](./02-goal-component-api-mapping.md)
- [目标 3: API+TaskCase 自动生成页面](./03-goal-auto-page-generation.md)
- [目标 4: 拖拉拽细节调整](./04-goal-drag-drop-refinement.md)
- [前端组件架构](./05-architecture.md)
- [架构图汇总](./06-architecture-diagrams.md)
